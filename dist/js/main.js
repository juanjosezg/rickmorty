function initializeRickMortyWidget(e){document.getElementById("rickmorty_widget_"+e).getElementsByClassName("rickmorty-characters")[0];const r=document.getElementById("rickmorty_widget_"+e).getElementsByClassName("search-field")[0],c=document.getElementById("rickmorty_widget_"+e).getElementsByClassName("loading")[0],o=document.getElementById("rickmorty_widget_"+e).getElementsByClassName("rickmorty-characters-content")[0],s=document.getElementById("rickmorty_widget_"+e).getElementsByClassName("status-filter")[0],i=document.getElementById("rickmorty_widget_"+e).getElementsByClassName("gender-filter")[0],d=document.getElementById("rickmorty_widget_"+e).getElementsByClassName("total-results")[0],l=document.getElementById("rickmorty_widget_"+e).getElementsByClassName("prev-button")[0],m=document.getElementById("rickmorty_widget_"+e).getElementsByClassName("current-page")[0],g=document.getElementById("rickmorty_widget_"+e).getElementsByClassName("next-button")[0];let y=1,t;async function n(e){o.innerHTML="",o.style.display="none",c.style.display="block";try{var t,{info:n,results:a}=await async function(e){let t="https://rickandmortyapi.com/api/character/?page="+y;return e&&0<e.length&&(e=e.map(e=>e.key+"="+e.value).join("&"),t+="&"+e),await(await fetch(t)).json()}(e);d.textContent="Resultados Totales: "+n.count;for(t of a){var r=document.createElement("div");r.classList.add("character-card"),r.innerHTML=`
          <img src="${t.image}" class="character-image"/>
          <div class="character-card-info"> 
            <div class="character-name"> <strong>${t.name} </strong></div>
            <div class="character-status ${t.status}">${t.status}</div>
            <div class="character-specie"> <strong>Especie:</strong><br> ${t.species} </div>
            <div class="character-gender"><strong>Genero:</strong> <br>${t.gender}</div>
            <div class="character-orgin"><strong>Origen:</strong> <br>${t.origin.name}</div>
            <div class="character-location"><strong>Ultima Ubicacion:</strong> <br>${t.location.name}</div>
          </div>
        `,o.appendChild(r)}setTimeout(()=>{c.style.display="none",o.style.display="grid"},1500),i=(s=n).pages,l.disabled=1===y,g.disabled=y===i||!s.next,m.textContent=`Pagina  ${y} de `+i}catch(e){console.error("Error obteniendo los personajes:",e),c.style.display="none",o.style.display="block",o.innerHTML='<div class="error-message">No se pudieron cargar los personajes. Por favor, inténtalo de nuevo más tarde.</div>'}var s,i}function a(){var e=[],t=r.value.trim(),n=s?s.value:"",a=i?i.value:"";return""!==t&&e.push({key:"name",value:t}),""!==n&&e.push({key:"status",value:n}),""!==a&&e.push({key:"gender",value:a}),e}r.addEventListener("input",function(){clearTimeout(t),t=setTimeout(function(){v()},800)}),s&&s.addEventListener("change",v),i&&i.addEventListener("change",v);async function u(e){y+=e,n(a())}function v(){y=1,n(a())}window["changePage_"+e]=u,l.addEventListener("click",()=>u(-1)),g.addEventListener("click",()=>u(1)),n(a())}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".rickmorty-widget").forEach(e=>{var t=e.id.replace("rickmorty_widget_","");e.querySelector(".status-filter"),e.querySelector(".gender-filter");initializeRickMortyWidget(t)})});